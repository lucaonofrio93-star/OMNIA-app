<!DOCTYPE html>

<html lang="it">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>OMNIA - Accademia</title>

<style>

body { background: #0a0a0a; color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; padding: 20px; margin: 0; }

h1 { color: #00ff88; margin-bottom: 30px; }

.config-container { background: #1a1a1a; padding: 20px; border-radius: 12px; display: inline-block; margin-bottom: 20px; border: 1px solid #333; }

.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; max-width: 1200px; margin: 20px auto; padding: 0 15px; }

.card { background: #151515; padding: 25px; border-radius: 12px; border: 1px solid #333; text-align: left; border-top: 4px solid #00ff88; transition: transform 0.2s; }

.card:hover { transform: translateY(-5px); border-color: #00ff88; }

.card h3 { margin-top: 0; color: #00ff88; font-size: 1.2rem; }

.card p { line-height: 1.6; color: #ccc; font-size: 0.95rem; }

button { cursor: pointer; padding: 12px 25px; border-radius: 50px; border: none; font-weight: bold; background: #00ff88; color: black; margin: 10px; transition: opacity 0.2s; }

button:hover { opacity: 0.9; }

button:disabled { background: #444; color: #888; cursor: not-allowed; }

input { padding: 12px; width: 300px; border-radius: 8px; border: 1px solid #444; background: #1a1a1a; color: white; margin: 10px; outline: none; }

input:focus { border-color: #00ff88; }

.status-msg { margin-top: 10px; font-size: 0.85rem; color: #888; }

</style>

</head>

<body>



<h1>OMNIA Accademia</h1>


<div class="config-container">

<input type="password" id="apiKey" placeholder="Incolla qui la tua API Key Gemini">

<button onclick="salva()" style="background: #4a90e2; color: white;">Salva Chiave</button>

<div class="status-msg" id="keyStatus"></div>

</div>



<br>

<button id="mainBtn" onclick="genera()" style="font-size: 1.1rem; padding: 15px 40px;">ðŸ”„ Aggiorna Conoscenza</button>



<div id="grid" class="grid"></div>



<script>

const response = await fetch(https://www.google.com/search?q=https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent%3Fkey%3D${key}, {

const cats = ['Storia IT', 'Geopolitica', 'AttualitÃ ', 'Letteratura', 'Arte', 'Musica'];



function salva() {

const input = document.getElementById('apiKey');

key = input.value.trim();

if (!key) {

alert("Per favore, inserisci una chiave valida.");

return;

}

localStorage.setItem('omnia_key', key);

document.getElementById('keyStatus').innerText = "Chiave salvata correttamente!";

setTimeout(() => document.getElementById('keyStatus').innerText = "", 3000);

}



async function genera() {

if(!key) return alert("Inserisci e salva la chiave API prima di continuare!");


const btn = document.getElementById('mainBtn');

const originalText = btn.innerText;

btn.disabled = true;

btn.innerText = "â³ Generazione in corso...";



try {

const prompt = `Sei un esperto accademico. Scrivi 6 brevi pillole di cultura generale (massimo 30 parole ciascuna), una per ogni categoria: ${cats.join(', ')}.

Rispondi ESCLUSIVAMENTE con un oggetto JSON valido nel seguente formato:

{"Storia IT": "...", "Geopolitica": "...", "AttualitÃ ": "...", "Letteratura": "...", "Arte": "...", "Musica": "..."}`;



const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${key}`, {

method: 'POST',

headers: { 'Content-Type': 'application/json' },

body: JSON.stringify({

contents: [{ parts: [{ text: prompt }] }],

generationConfig: { responseMimeType: "application/json" }

})

});



const data = await response.json();


if (data.error) {

throw new Error(data.error.message);

}



if (!data.candidates || !data.candidates[0].content.parts[0].text) {

throw new Error("Risposta non valida dall'API.");

}



const contentText = data.candidates[0].content.parts[0].text;

const pillole = JSON.parse(contentText);


renderCards(pillole);

console.log("Dati aggiornati con successo.");



} catch (e) {

console.error(e);

alert("Errore durante la generazione: " + e.message);

} finally {

btn.disabled = false;

btn.innerText = originalText;

}

}



function renderCards(data = null) {

const grid = document.getElementById('grid');

grid.innerHTML = cats.map(c => {

const content = data && data[c] ? data[c] : "In attesa di dati... Clicca su 'Aggiorna Conoscenza'.";

return `

<div class="card">

<h3>${c}</h3>

<p>${content}</p>

</div>

`;

}).join('');

}



// Inizializzazione

if(key) {

document.getElementById('apiKey').value = key;

}

renderCards();

</script>

</body>

</html>
